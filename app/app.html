<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>lemon-electron</title>
        <script>
            (function () {
                if (!process.env.HOT) {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = './dist/style.css';
                    // HACK: Writing the script path should be done with webpack
                    document.getElementsByTagName('head')[0].appendChild(link);
                }
            }());

            require("electron").remote.getCurrentWindow().on('focus', () => {
                document.getElementById("root").classList.remove("backdrop");
            });

            require("electron").remote.getCurrentWindow().on('blur', () => {
                document.getElementById("root").classList.add("backdrop");
            });
        </script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <style>
            .loading {
                width: 50vh;
                height: 50vh;
                display: grid;
                background-color: white;
                color: black;
                vertical-align: middle;
                -webkit-app-region: drag;
                justify-items: center;
                align-items: center;
            }
        </style>
    </head>
    <body>
        <div id="root">
            <div class="loading">loading...</div>
        </div>
        <script>
            {
                const scripts = [];

                // Dynamically insert the DLL script in development env in the
                // renderer process
                if (process.env.NODE_ENV === 'development') {
                    scripts.push('../dll/renderer.dev.dll.js');
                }

                // Dynamically insert the bundled app script in the renderer process
                const port = process.env.PORT || 1212;
                scripts.push(
                    (process.env.HOT)
                        ? 'http://localhost:' + port + '/dist/renderer.dev.js'
                        : './dist/renderer.prod.js'
                );

                document.write(
                    scripts
                        .map(script => `<script defer src="${script}"><\/script>`)
                        .join('')
                );
            }
        </script>
    </body>
</html>
